<%- include('../fragmente/head', {titlu: "Produse"}) %>
<%- include('../fragmente/header') %>
<script src="/resurse/js/filtru-produse.js"></script>
<main class="container">
    <section id="sectiune-filtre" class="sectiune-filtre">
        <!-- Text: caută după nume -->
        <label for="filtru-nume">Caută după nume:</label>
        <input type="text" id="filtru-nume" placeholder="Nume produs...">
    
        <!-- Range: preț -->
        <label for="filtru-pret">Preț:</label>
        <span id="pret-min">0</span>
        <input type="range" id="filtru-pret" min="0" max="2000" value="2000">
        <span id="pret-max">2000</span>
        <span id="pret-valoare">(2000)</span>
    
        <!-- Datalist: categorie -->
        <label for="filtru-categorie">Categorie:</label>
        <input list="categorii-lista" id="filtru-categorie" placeholder="Alege categorie...">
        <datalist id="categorii-lista">
            <option value="oricare">
            <% categorii.forEach(function(cat) { %>
                <option value="<%= cat %>">
            <% }); %>
        </datalist>
    
        <!-- Radio: exclusivitate -->
        <fieldset>
            <legend>Exclusivitate:</legend>
            <label><input type="radio" name="filtru-exclusiv" value="oricare" checked> Oricare</label>
            <label><input type="radio" name="filtru-exclusiv" value="da"> Doar exclusive</label>
            <label><input type="radio" name="filtru-exclusiv" value="nu"> Fără exclusive</label>
        </fieldset>
    
        <!-- Checkbox: minifigurine -->
        <label><input type="checkbox" id="filtru-minifigurine"> Doar seturi cu minifigurine</label>
    
        <!-- Textarea: cuvânt cheie în descriere -->
        <label for="filtru-descriere">Cuvânt cheie în descriere:</label>
        <textarea id="filtru-descriere" rows="1" placeholder="Cuvânt cheie..."></textarea>
    
        <!-- Select simplu: vârstă recomandată -->
        <label for="filtru-varsta">Vârstă recomandată:</label>
        <select id="filtru-varsta">
            <option value="">Oricare</option>
            <option value="4+">4+</option>
            <option value="6+">6+</option>
            <option value="8+">8+</option>
            <option value="10+">10+</option>
            <option value="12+">12+</option>
            <option value="18+">18+</option>
        </select>
    
        <!-- Select multiplu: minifigurine incluse (poți popula dinamic dacă vrei) -->
        <label for="filtru-minifigurine-incluse">Minifigurine incluse:</label>
        <select id="filtru-minifigurine-incluse" multiple>
            <option value="">Oricare</option>
            <option value="Bluey">Bluey</option>
            <option value="Bingo">Bingo</option>
            <option value="Kai">Kai</option>
            <option value="Zane">Zane</option>
            <!-- Adaugă aici alte minifigurine relevante -->
        </select>
    </section>
    <section class="products-section">
        <h1>Produse</h1>
        <div id="lista-produse">
            <% if (produse && produse.length > 0) { %>
                <div class="grid-produse">
                    <% produse.forEach(function(prod) { 
                        // pentru clasa, eliminam spatiile din categorie
                        let categorieClass = prod.categorie.replace(/\\s+/g, '');
                    %>
                    <article id="produs_<%= prod.id %>" class="produs-articol <%= categorieClass %>">
                        <div class="produs-col stanga">
                            <img src="<%= prod.imagine %>" alt="<%= prod.nume %>">
                            <div class="produs-info">
                                <span class="produs-categorie"><%= prod.categorie %></span>
                                <span class="produs-pret"><%= prod.pret %> Lei</span>
                            </div>
                        </div>
                        <div class="produs-col dreapta">
                            <h2><%= prod.nume %></h2>
                            <details>
                                <summary>Specificații</summary>
                                <ul>
                                    <li><b>Vârstă recomandată:</b> <i><%= prod.varsta_recomandata %></i></li>
                                    <li>
                                        <b>Minifigurine incluse:</b>
                                        <i>
                                          <%= prod.minifigurine_incluse && prod.minifigurine_incluse.trim() !== "" ? prod.minifigurine_incluse : "Nicio minifigurină" %>
                                        </i>
                                      </li>
                                      <li>
                                        <b>Număr minifigurine:</b>
                                        <i>
                                          <%= typeof prod.numar_minifigurine !== "undefined" && prod.numar_minifigurine !== null ? prod.numar_minifigurine : "-" %>
                                        </i>
                                      </li><li><b>Număr piese:</b> <i><%= prod.numar_piese %></i></li>
                                    <li>
                                        <b>Data adăugare:</b>
                                        <i>
                                            <time datetime="<%= prod.data_adaugare ? prod.data_adaugare.toISOString().split('T')[0] : '' %>">
                                                <%= prod.data_adaugare ? new Date(prod.data_adaugare).toLocaleDateString('ro-RO', { day: '2-digit', month: 'long', year: 'numeric', weekday: 'long' }) : '' %>
                                            </time>
                                        </i>
                                    </li>
                                    <li><b>Exclusiv:</b> <i><%= prod.exclusiv ? 'Da' : 'Nu' %></i></li>
                                </ul>
                            </details>
                            <div class="produs-descriere">
                                <%= prod.descriere %>
                            </div>
                            <a href="/produs/<%= prod.id %>" class="detalii-link">Detalii</a>
                        </div>
                    </article>
                    <% }); %>
                </div>
            <% } else { %>
                <p>Nu există produse de afișat.</p>
            <% } %>
        </div>
    </section>
</main>

<%- include('../fragmente/footer') %> 